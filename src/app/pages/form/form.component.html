<mat-card class="example-card">
    <mat-card-header> </mat-card-header>
    <form autocomplete="off" novalidate [formGroup]="form" (submit)="save()">
        <mat-card-content>
            <!-- Firstname -->

            <mat-form-field appearance="outline">
                <mat-label>Firstname *</mat-label>
                <input
                    matInput
                    type="text"
                    id="firstName"
                    formControlName="firstName"
                />

                @if (form.invalid) {
                    <mat-error>{{
                        getErrorMessage("firstName", form)
                    }}</mat-error>
                }
            </mat-form-field>

            <!-- Lastname -->

            <mat-form-field appearance="outline">
                <mat-label>lastName *</mat-label>
                <input
                    matInput
                    type="text"
                    id="lastName"
                    formControlName="lastName"
                />

                @if (form.invalid) {
                    <mat-error>{{
                        getErrorMessage("lastName", form)
                    }}</mat-error>
                }
            </mat-form-field>

            <mat-form-field class="example-chip-list">
                <mat-label>Favorite Fruits</mat-label>
                <mat-chip-grid
                    #chipGrid
                    aria-label="Fruit selection"
                    formArrayName="fruits"
                >
                    @for (fruit of fruits; track fruit) {
                        <mat-chip-row (removed)="remove(fruit)">
                            {{ fruit }}
                            <button
                                matChipRemove
                                [attr.aria-label]="'remove ' + fruit"
                            >
                                <mat-icon>cancel</mat-icon>
                            </button>
                        </mat-chip-row>
                    }
                </mat-chip-grid>
                <input
                    placeholder="New Fruit..."
                    #fruitInput
                    [matChipInputFor]="chipGrid"
                    [matAutocomplete]="auto"
                    (matChipInputTokenEnd)="add($event)"
                />
                <mat-autocomplete
                    #auto="matAutocomplete"
                    (optionSelected)="selected($event)"
                >
                    @for (fruit of filteredFruits | async; track fruit) {
                        <mat-option [value]="fruit">{{ fruit }}</mat-option>
                    }
                </mat-autocomplete>
            </mat-form-field>

            <!-- Submit -->
            <div class="button-wrapper">
                <button mat-flat-button color="primary">Submit</button>
            </div>
        </mat-card-content>

        <mat-divider></mat-divider>

        <mat-card-actions align="end">
            <button
                type="submit"
                color="primary"
                mat-raised-button
                [disabled]="!form.valid && (form.dirty || form.untouched)"
            >
                SAVE
            </button>
        </mat-card-actions>
    </form>
    <mat-card-footer>
        <pre>{{ form.value | json }}</pre>
    </mat-card-footer>
</mat-card>
